{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/abhimanyu/experiments/frontend/src/app/%28admin%29/admin/users/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport axiosInstance from '@/lib/api/axois';\r\n\r\ninterface User {\r\n  id: number;\r\n  name: string;\r\n  email: string;\r\n  role: 'admin' | 'tenant' | 'user';\r\n  is_active: boolean;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport default function AdminUsersPage() {\r\n  const { user } = useAuth();\r\n  const [users, setUsers] = useState<User[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedRole, setSelectedRole] = useState<string>('all');\r\n\r\n  useEffect(() => {\r\n    fetchUsers();\r\n  }, [selectedRole]);\r\n\r\n  const fetchUsers = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const endpoint = selectedRole === 'all' \r\n        ? '/api/v1/users/' \r\n        : `/api/v1/users/role/${selectedRole}`;\r\n      \r\n      const response = await axiosInstance.get(endpoint);\r\n      setUsers(response.data.users || response.data);\r\n    } catch (error) {\r\n      console.error('Error fetching users:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const updateUserRole = async (userId: number, newRole: string) => {\r\n    try {\r\n      await axiosInstance.patch(`/api/v1/users/${userId}/role?role=${newRole}`);\r\n      fetchUsers(); // Refresh the list\r\n    } catch (error) {\r\n      console.error('Error updating user role:', error);\r\n    }\r\n  };\r\n\r\n  const getRoleBadgeColor = (role: string) => {\r\n    switch (role) {\r\n      case 'admin':\r\n        return 'bg-red-100 text-red-800';\r\n      case 'tenant':\r\n        return 'bg-green-100 text-green-800';\r\n      case 'user':\r\n        return 'bg-blue-100 text-blue-800';\r\n      default:\r\n        return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"sm:flex sm:items-center\">\r\n        <div className=\"sm:flex-auto\">\r\n          <h1 className=\"text-2xl font-semibold text-gray-900\">User Management</h1>\r\n          <p className=\"mt-2 text-sm text-gray-700\">\r\n            Manage user accounts and roles. You can view and update user roles.\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Role Filter */}\r\n      <div className=\"mt-6\">\r\n        <label htmlFor=\"role-filter\" className=\"block text-sm font-medium text-gray-700\">\r\n          Filter by Role\r\n        </label>\r\n        <select\r\n          id=\"role-filter\"\r\n          value={selectedRole}\r\n          onChange={(e) => setSelectedRole(e.target.value)}\r\n          className=\"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md\"\r\n        >\r\n          <option value=\"all\">All Roles</option>\r\n          <option value=\"admin\">Admin</option>\r\n          <option value=\"tenant\">Tenant</option>\r\n          <option value=\"user\">User</option>\r\n        </select>\r\n      </div>\r\n\r\n      {/* Users Table */}\r\n      <div className=\"mt-8 flex flex-col\">\r\n        <div className=\"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8\">\r\n          <div className=\"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8\">\r\n            <div className=\"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg\">\r\n              <table className=\"min-w-full divide-y divide-gray-300\">\r\n                <thead className=\"bg-gray-50\">\r\n                  <tr>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      User\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Role\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Status\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Created\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Actions\r\n                    </th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                  {loading ? (\r\n                    <tr>\r\n                      <td colSpan={5} className=\"px-6 py-4 text-center\">\r\n                        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto\"></div>\r\n                      </td>\r\n                    </tr>\r\n                  ) : (\r\n                    users.map((userItem) => (\r\n                      <tr key={userItem.id}>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                          <div className=\"flex items-center\">\r\n                            <div className=\"flex-shrink-0 h-10 w-10\">\r\n                              <div className=\"h-10 w-10 rounded-full bg-indigo-600 flex items-center justify-center\">\r\n                                <span className=\"text-white text-sm font-medium\">\r\n                                  {userItem.name.charAt(0).toUpperCase()}\r\n                                </span>\r\n                              </div>\r\n                            </div>\r\n                            <div className=\"ml-4\">\r\n                              <div className=\"text-sm font-medium text-gray-900\">\r\n                                {userItem.name}\r\n                              </div>\r\n                              <div className=\"text-sm text-gray-500\">\r\n                                {userItem.email}\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                          <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${getRoleBadgeColor(userItem.role)}`}>\r\n                            {userItem.role}\r\n                          </span>\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                          <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\r\n                            userItem.is_active \r\n                              ? 'bg-green-100 text-green-800' \r\n                              : 'bg-red-100 text-red-800'\r\n                          }`}>\r\n                            {userItem.is_active ? 'Active' : 'Inactive'}\r\n                          </span>\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                          {new Date(userItem.created_at).toLocaleDateString()}\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\r\n                          <select\r\n                            value={userItem.role}\r\n                            onChange={(e) => updateUserRole(userItem.id, e.target.value)}\r\n                            className=\"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md\"\r\n                            disabled={userItem.id === user?.id} // Can't change own role\r\n                          >\r\n                            <option value=\"user\">User</option>\r\n                            <option value=\"tenant\">Tenant</option>\r\n                            <option value=\"admin\">Admin</option>\r\n                          </select>\r\n                        </td>\r\n                      </tr>\r\n                    ))\r\n                  )}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n} "],"names":[],"mappings":"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","debugId":null}}]
}