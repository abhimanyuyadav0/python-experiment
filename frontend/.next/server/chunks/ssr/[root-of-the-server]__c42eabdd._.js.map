{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 29, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/abhimanyu/experiments/frontend/src/components/RoleProtectedRoute.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\n\r\ninterface RoleProtectedRouteProps {\r\n  children: React.ReactNode;\r\n  requiredRole: 'admin' | 'tenant' | 'user' | ('admin' | 'tenant' | 'user')[];\r\n  fallbackPath?: string;\r\n}\r\n\r\nexport default function RoleProtectedRoute({ \r\n  children, \r\n  requiredRole, \r\n  fallbackPath = '/dashboard' \r\n}: RoleProtectedRouteProps) {\r\n  const { isAuthenticated, isLoading, hasRole, isAdmin, isTenant, isUser } = useAuth();\r\n  const router = useRouter();\r\n\r\n  const hasRequiredRole = () => {\r\n    if (Array.isArray(requiredRole)) {\r\n      return requiredRole.some(role => hasRole(role));\r\n    }\r\n    return hasRole(requiredRole);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!isLoading && (!isAuthenticated || !hasRequiredRole())) {\r\n      router.push(fallbackPath);\r\n    }\r\n  }, [isAuthenticated, isLoading, hasRequiredRole, requiredRole, router, fallbackPath]);\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-indigo-600\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!isAuthenticated || !hasRequiredRole()) {\r\n    return null;\r\n  }\r\n\r\n  return <>{children}</>;\r\n} "],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;;AAYe,SAAS,mBAAmB,EACzC,QAAQ,EACR,YAAY,EACZ,eAAe,YAAY,EACH;IACxB,MAAM,EAAE,eAAe,EAAE,SAAS,EAAE,OAAO,EAAE,OAAO,EAAE,QAAQ,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,+HAAA,CAAA,UAAO,AAAD;IACjF,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,MAAM,kBAAkB;QACtB,IAAI,MAAM,OAAO,CAAC,eAAe;YAC/B,OAAO,aAAa,IAAI,CAAC,CAAA,OAAQ,QAAQ;QAC3C;QACA,OAAO,QAAQ;IACjB;IAEA,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,CAAC,aAAa,CAAC,CAAC,mBAAmB,CAAC,iBAAiB,GAAG;YAC1D,OAAO,IAAI,CAAC;QACd;IACF,GAAG;QAAC;QAAiB;QAAW;QAAiB;QAAc;QAAQ;KAAa;IAEpF,IAAI,WAAW;QACb,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;;;;;;;;;;IAGrB;IAEA,IAAI,CAAC,mBAAmB,CAAC,mBAAmB;QAC1C,OAAO;IACT;IAEA,qBAAO;kBAAG;;AACZ","debugId":null}},
    {"offset": {"line": 89, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/abhimanyu/experiments/frontend/src/app/%28dashboard%29/layout.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport Link from 'next/link';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport RoleProtectedRoute from '@/components/RoleProtectedRoute';\r\n\r\nexport default function DashboardLayout({\r\n  children,\r\n}: {\r\n  children: React.ReactNode;\r\n}) {\r\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\r\n  const { user, logout, isAdmin, isTenant, isUser } = useAuth();\r\n  const router = useRouter();\r\n\r\n  const handleLogout = () => {\r\n    logout();\r\n    router.push('/auth/login');\r\n  };\r\n\r\n  return (\r\n    <RoleProtectedRoute requiredRole={['admin', 'tenant', 'user']} fallbackPath=\"/auth/login\">\r\n      <div className=\"min-h-screen bg-gray-100\">\r\n        {/* Navigation */}\r\n        <nav className=\"bg-white shadow-sm\">\r\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n            <div className=\"flex justify-between h-16\">\r\n              <div className=\"flex\">\r\n                <div className=\"flex-shrink-0 flex items-center\">\r\n                  <Link href=\"/dashboard\" className=\"text-xl font-bold text-indigo-600\">\r\n                    Dashboard\r\n                  </Link>\r\n                </div>\r\n                <div className=\"hidden sm:ml-6 sm:flex sm:space-x-8\">\r\n                  <Link\r\n                    href=\"/dashboard\"\r\n                    className=\"border-indigo-500 text-gray-900 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium\"\r\n                  >\r\n                    Overview\r\n                  </Link>\r\n                  {isAdmin() && (\r\n                    <Link\r\n                      href=\"/admin/users\"\r\n                      className=\"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium\"\r\n                    >\r\n                      User Management\r\n                    </Link>\r\n                  )}\r\n                  {isTenant() && (\r\n                    <Link\r\n                      href=\"/tenant\"\r\n                      className=\"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium\"\r\n                    >\r\n                      Tenant Portal\r\n                    </Link>\r\n                  )}\r\n                  {isUser() && (\r\n                    <Link\r\n                      href=\"/user\"\r\n                      className=\"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium\"\r\n                    >\r\n                      User Area\r\n                    </Link>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <div className=\"hidden sm:ml-6 sm:flex sm:items-center\">\r\n                <div className=\"ml-3 relative\">\r\n                  <div>\r\n                    <button\r\n                      onClick={() => setIsMenuOpen(!isMenuOpen)}\r\n                      className=\"max-w-xs bg-white flex items-center text-sm rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\r\n                    >\r\n                      <span className=\"sr-only\">Open user menu</span>\r\n                      <div className=\"h-8 w-8 rounded-full bg-indigo-600 flex items-center justify-center\">\r\n                        <span className=\"text-white text-sm font-medium\">\r\n                          {user?.name?.charAt(0).toUpperCase()}\r\n                        </span>\r\n                      </div>\r\n                    </button>\r\n                  </div>\r\n                  {isMenuOpen && (\r\n                    <div className=\"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5 focus:outline-none\">\r\n                      <div className=\"px-4 py-2 text-sm text-gray-700 border-b\">\r\n                        {user?.name}\r\n                      </div>\r\n                      <div className=\"px-4 py-2 text-sm text-gray-500 border-b\">\r\n                        {user?.email}\r\n                      </div>\r\n                      <button\r\n                        onClick={handleLogout}\r\n                        className=\"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"\r\n                      >\r\n                        Sign out\r\n                      </button>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <div className=\"-mr-2 flex items-center sm:hidden\">\r\n                <button\r\n                  onClick={() => setIsMenuOpen(!isMenuOpen)}\r\n                  className=\"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500\"\r\n                >\r\n                  <span className=\"sr-only\">Open main menu</span>\r\n                  <svg\r\n                    className=\"h-6 w-6\"\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    fill=\"none\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    stroke=\"currentColor\"\r\n                  >\r\n                    <path\r\n                      strokeLinecap=\"round\"\r\n                      strokeLinejoin=\"round\"\r\n                      strokeWidth={2}\r\n                      d=\"M4 6h16M4 12h16M4 18h16\"\r\n                    />\r\n                  </svg>\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Mobile menu */}\r\n          {isMenuOpen && (\r\n            <div className=\"sm:hidden\">\r\n              <div className=\"pt-2 pb-3 space-y-1\">\r\n                <Link\r\n                  href=\"/dashboard\"\r\n                  className=\"bg-indigo-50 border-indigo-500 text-indigo-700 block pl-3 pr-4 py-2 border-l-4 text-base font-medium\"\r\n                >\r\n                  Overview\r\n                </Link>\r\n                {isAdmin() && (\r\n                  <Link\r\n                    href=\"/admin/users\"\r\n                    className=\"border-transparent text-gray-500 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-700 block pl-3 pr-4 py-2 border-l-4 text-base font-medium\"\r\n                  >\r\n                    User Management\r\n                  </Link>\r\n                )}\r\n                {isTenant() && (\r\n                  <Link\r\n                    href=\"/tenant\"\r\n                    className=\"border-transparent text-gray-500 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-700 block pl-3 pr-4 py-2 border-l-4 text-base font-medium\"\r\n                  >\r\n                    Tenant Portal\r\n                  </Link>\r\n                )}\r\n                {isUser() && (\r\n                  <Link\r\n                    href=\"/user\"\r\n                    className=\"border-transparent text-gray-500 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-700 block pl-3 pr-4 py-2 border-l-4 text-base font-medium\"\r\n                  >\r\n                    User Area\r\n                  </Link>\r\n                )}\r\n              </div>\r\n              <div className=\"pt-4 pb-3 border-t border-gray-200\">\r\n                <div className=\"flex items-center px-4\">\r\n                  <div className=\"flex-shrink-0\">\r\n                    <div className=\"h-10 w-10 rounded-full bg-indigo-600 flex items-center justify-center\">\r\n                      <span className=\"text-white text-sm font-medium\">\r\n                        {user?.name?.charAt(0).toUpperCase()}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"ml-3\">\r\n                    <div className=\"text-base font-medium text-gray-800\">{user?.name}</div>\r\n                    <div className=\"text-sm font-medium text-gray-500\">{user?.email}</div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"mt-3 space-y-1\">\r\n                  <button\r\n                    onClick={handleLogout}\r\n                    className=\"block w-full text-left px-4 py-2 text-base font-medium text-gray-500 hover:text-gray-800 hover:bg-gray-100\"\r\n                  >\r\n                    Sign out\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </nav>\r\n\r\n        {/* Main content */}\r\n        <main className=\"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8\">\r\n          {children}\r\n        </main>\r\n      </div>\r\n    </RoleProtectedRoute>\r\n  );\r\n} "],"names":[],"mappings":"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","debugId":null}}]
}